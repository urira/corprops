<%- include('../includes/head.ejs') %>
</head>

<body class="hold-transition layout-top-nav">
    <div class="wrapper">

        <%- include('../includes/navigation.ejs') %>
        <div class="container-fluid">
            <section class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1>Produccts</h1>
                        </div>
                        <div class="col-sm-6">
                            <ol class="breadcrumb float-sm-right">
                                <li class="breadcrumb-item"><a href="/">Home</a></li>
                                <li class="breadcrumb-item active">Products</li>
                            </ol>
                        </div>
                    </div>
                </div><!-- /.container-fluid -->
            </section>

            <% if (prods.length > 0) { %>
            <div class="grid">
                <div class="row">
                    <% for (let product of prods) { %>
                    <div class="col-lg-6">
                        <div class="card card-primary">
                            <div class="card-header">
                                <h3 class="card-title"><%= product.title %></h3>
                            </div>
                            <div class="card-body">

                                <% if (isAuthenticated) { %>
                                <%- include('../includes/add-to-cart.ejs', {product: product}) %>
                                <% } %>

                                <img src="/<%= product.imageUrl %>" alt="<%= product.title %>">
                                <p class="card-text text-center"><%- product.description %></p>
                                <div class="text-center">
                                    <a href="/products/<%= product._id %>" class="btn btn-primary">Details</a>
                                </div>


                            </div>
                        </div>


                    </div>
                    <% } %>
                </div>
                <% } else { %>
                <h1>No Products Found!</h1>
                <% } %>

                <%- include('../includes/pagination.ejs', {currentPage: currentPage, nextPage: nextPage, previousPage: previousPage, lastPage: lastPage, hasNextPage: hasNextPage, hasPreviousPage: hasPreviousPage}) %>


            </div>
            <!-- /.content-wrapper -->

        </div>
    </div>
    <%- include('../includes/end.ejs') %>